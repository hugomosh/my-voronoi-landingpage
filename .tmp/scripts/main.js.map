{"version":3,"sources":["../../app/scripts/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["var leVoronoi = d3.select('#leVoronoi');\nconsole.debug(leVoronoi);\nvar width = parseInt(leVoronoi.style('width'), 10),\n    height = parseInt(leVoronoi.style('height'), 10);\n\nconsole.debug({\n    width: width,\n    height: height\n});\n/** Construct a responsive svg */\nvar svg = leVoronoi.append(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\nd3.select(window).on('resize', resize);\nvar oldWidth, oldHeight;\n\nfunction resize() {\n    console.log('resize');\n    oldWidth = width;\n    oldHeight = height;\n    // update width\n    width = parseInt(leVoronoi.style('width'), 10);\n    height = parseInt(leVoronoi.style('height'), 10);\n\n    svg.attr(\"width\", width)\n        .attr(\"height\", height);\n\n    vertices = vertices.map(function(e) {\n        return {\n            point: [e.point[0] * width / oldWidth, e.point[1] * height / oldHeight],\n            vx: 0,\n            vy: 0\n        };\n    });\n\n    diagram = buildVoronoi(vertices);\n    drawVoronoiDiagram(diagram);\n\n\n\n}\n\nfunction moveVertices(vertices) {\n    vertices = vertices.map(function(e) {\n        var p = e.point;\n        p[0] += e.vx;\n        if (p[0] < 0) p[0] = e.vx *= -1;\n        else if (p[0] > width) p[0] = width + (e.vx *= -1);\n        p[1] += e.vy;\n        if (p[1] < 0) p[1] = e.vy *= -1;\n        else if (p[1] > height) p[1] = height + (e.vy *= -1);\n\n        return {\n            point: p,\n            vx: e.vx + (0.1 * (Math.random() - .5) - 0.001 * e.vx),\n            vy: e.vy + (0.1 * (Math.random() - .5) - 0.001 * e.vy)\n        };\n    });\n    return vertices;\n\n    /*    verticesG.selectAll(\"circle\")\n            .transition()\n            .attr(\"transform\", function(d, i) {\n                d = vertices[i];\n                return \"translate(\" + d.point + \")\";\n            })\n            .duration(30)\n            .attr(\"r\", r)\n            .each('end', function() {\n                continousMoving();\n            });*/\n}\n\n/* Build n points */\nvar n = 6,\n    bloques = new Array(n);\n\nvar vertices = d3.range(n).map(function(d) {\n    return {\n        point: [Math.random() * width, Math.random() * height],\n        vx: 0,\n        vy: 0\n    };\n});\n\n\n\nvar voronoi = new Voronoi();\nvar bbox, sites;\n\nfunction buildVoronoi(vertices) {\n    bbox = { xl: 0, xr: width, yt: 0, yb: height }; // xl is x-left, xr is x-right, yt is y-top, and yb is y-bottom\n\n    sites = vertices.map(function(e) {\n        return { x: e.point[0], y: e.point[1] }\n    });\n    var diagram = voronoi.compute(sites, bbox);\n\n    return diagram;\n}\n\n//drawVerices(diagram.vertices);\nvar diagram = buildVoronoi(vertices);\ndrawVoronoiDiagram(diagram);\n\n\nfunction drawVoronoiDiagram(diagram) {\n\n    var polygons = [];\n\n    diagram.cells.map(function(cell) {\n        var p = [];\n        var v = cell.halfedges[0].getStartpoint();\n        p.push([v.x, v.y]);\n        cell.halfedges.map(function(hE) {\n            v = hE.getEndpoint();\n            p.push([v.x, v.y]);\n            return\n        });\n        polygons.push(p);\n    });\n    drawPolygon(polygons);\n    drawSites(sites);\n\n    return polygons;\n}\n\n// drawPolygon(polygons);\n\nfunction drawSites(sites) {\n    var sitesG = svg.append(\"g\");\n    var r = 5;\n    sitesG.selectAll(\".sites\")\n        .data(sites)\n        .enter()\n        .append(\"g\")\n        .attr(\"transform\", function(d, i) {\n            return \"translate(\" + d.x + ',' + d.y + \")\";\n        })\n        .append(\"circle\")\n        .attr(\"fill\", 'blue')\n        .attr(\"r\", r);\n}\n\nfunction drawVerices(sites) {\n    var sitesG = svg.append(\"g\");\n    var r = 3;\n    sitesG.selectAll(\".sites\")\n        .data(sites)\n        .enter()\n        .append(\"g\")\n        .attr(\"transform\", function(d, i) {\n            console.log(i, d);\n            return \"translate(\" + d.x + ',' + d.y + \")\";\n        })\n        .append(\"circle\")\n        .attr(\"fill\", 'green')\n        .attr(\"r\", r);\n}\n\n//var path = svg.append(\"g\").selectAll(\"path\");\n\nfunction drawPolygon(polygon) {\n    var path = svg.append(\"g\").selectAll(\"path\");\n\n    path = path\n        .data(polygon, polygonF);\n    path.exit()\n    path.enter()\n        .append(\"path\")\n        .attr(\"class\", function(d, i) {\n            return \"celula q\" + (i % 9) + \"-9\";\n        })\n        .attr(\"d\", polygonF);\n\n    path.order();\n}\n\n\nfunction polygonF(d) {\n    return \"M\" + d.join(\"L\") + \"Z\";\n}\n\n/* Animación continua*/\nfunction continousM(elapsed) {\n    svg.selectAll(\"g\").remove();\n    // console.log(elapsed - total_time);\n    console.log('c');\n    total_time = elapsed;\n    vertices = moveVertices(vertices);\n/*    sites = vertices.map(function(e) {\n        return { x: e.point[0], y: e.point[1] }\n    });\n    drawSites(sites);\n*/\n     diagram = buildVoronoi(vertices);\n     drawVoronoiDiagram(diagram);\n}\n\nvar total_time;\nvar timer = d3_timer.timer(continousM);\n\nsvg.on(\"mouseenter\", flash(\"mouseenter\", \"-1em\"))\n    .on(\"mouseover\", flash(\"mouseover\", \"0\"))\n    .on(\"mouseout\",  flash(\"mouseout\", \"1em\"))\n    .on(\"mouseleave\", flash(\"mouseleave\", \"2em\"));\n\nfunction flash(name, dy) {\n   // timer.stop();\n  return function() {\n    if(name===\"mouseenter\"){timer.stop();}\n    if(name===\"mouseleave\"){timer.restart(continousM);}\n    console.log(name,dy);\n\n  };\n}\n\n"]}